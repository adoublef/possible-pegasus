/* esm.sh - esbuild bundle(@github/catalyst@1.6.0) denonext production */
var b=new WeakSet;function h(t){b.add(t),t.shadowRoot&&y(t.shadowRoot),x(t),w(t.ownerDocument)}function y(t){x(t),w(t)}var u=new WeakMap;function w(t=document){if(u.has(t))return u.get(t);let e=!1,o=new MutationObserver(n=>{for(let i of n)if(i.type==="attributes"&&i.target instanceof Element)g(i.target);else if(i.type==="childList"&&i.addedNodes.length)for(let a of i.addedNodes)a instanceof Element&&x(a)});o.observe(t,{childList:!0,subtree:!0,attributeFilter:["data-action"]});let r={get closed(){return e},unsubscribe(){e=!0,u.delete(t),o.disconnect()}};return u.set(t,r),r}function x(t){for(let e of t.querySelectorAll("[data-action]"))g(e);t instanceof Element&&t.hasAttribute("data-action")&&g(t)}function D(t){let e=t.currentTarget;for(let o of M(e))if(t.type===o.type){let r=e.closest(o.tag);b.has(r)&&typeof r[o.method]=="function"&&r[o.method](t);let n=e.getRootNode();if(n instanceof ShadowRoot&&b.has(n.host)&&n.host.matches(o.tag)){let i=n.host;typeof i[o.method]=="function"&&i[o.method](t)}}}function*M(t){for(let e of(t.getAttribute("data-action")||"").trim().split(/\s+/)){let o=e.lastIndexOf(":"),r=Math.max(0,e.lastIndexOf("#"))||e.length;yield{type:e.slice(0,o),tag:e.slice(o+1,r),method:e.slice(r+1)||"handleEvent"}}}function g(t){for(let e of M(t))t.addEventListener(e.type,D)}var A=t=>String(typeof t=="symbol"?t.description:t).replace(/([A-Z]($|[a-z]))/g,"-$1").replace(/--/g,"-").replace(/^-|-$/,"").toLowerCase(),v=(t,e="property")=>{let o=A(t);if(!o.includes("-"))throw new DOMException(`${e}: ${String(t)} is not a valid ${e} name`,"SyntaxError");return o};function S(t){let e=A(t.name).replace(/-element$/,"");try{window.customElements.define(e,t),window[t.name]=customElements.get(e)}catch(o){if(!(o instanceof DOMException&&o.name==="NotSupportedError"))throw o}return t}function E(t,e){let o=t.tagName.toLowerCase();if(t.shadowRoot){for(let r of t.shadowRoot.querySelectorAll(`[data-target~="${o}.${e}"]`))if(!r.closest(o))return r}for(let r of t.querySelectorAll(`[data-target~="${o}.${e}"]`))if(r.closest(o)===t)return r}function C(t,e){let o=t.tagName.toLowerCase(),r=[];if(t.shadowRoot)for(let n of t.shadowRoot.querySelectorAll(`[data-targets~="${o}.${e}"]`))n.closest(o)||r.push(n);for(let n of t.querySelectorAll(`[data-targets~="${o}.${e}"]`))n.closest(o)===t&&r.push(n);return r}function $(t){for(let e of t.querySelectorAll("template[data-shadowroot]"))e.parentElement===t&&t.attachShadow({mode:e.getAttribute("data-shadowroot")==="closed"?"closed":"open"}).append(e.content.cloneNode(!0))}var k="attr";function I(t,e){c(t,k).add(e)}var N=new WeakSet;function l(t,e){if(N.has(t))return;N.add(t);let o=Object.getPrototypeOf(t),r=o?.constructor?.attrPrefix??"data-";e||(e=c(o,k));for(let n of e){let i=t[n],a=v(`${r}${n}`),s={configurable:!0,get(){return this.getAttribute(a)||""},set(d){this.setAttribute(a,d||"")}};typeof i=="number"?s={configurable:!0,get(){return Number(this.getAttribute(a)||0)},set(d){this.setAttribute(a,d)}}:typeof i=="boolean"&&(s={configurable:!0,get(){return this.hasAttribute(a)},set(d){this.toggleAttribute(a,d)}}),Object.defineProperty(t,n,s),n in t&&!t.hasAttribute(a)&&s.set.call(t,i)}}function L(t){let e=t.observedAttributes||[],o=t.attrPrefix??"data-",r=n=>v(`${o}${n}`);Object.defineProperty(t,"observedAttributes",{configurable:!0,get(){return[...c(t.prototype,k)].map(r).concat(e)},set(n){e=n}})}var p=Symbol.for("catalyst"),m=class{constructor(e){let o=this,r=e.prototype.connectedCallback;e.prototype.connectedCallback=function(){o.connectedCallback(this,r)};let n=e.prototype.disconnectedCallback;e.prototype.disconnectedCallback=function(){o.disconnectedCallback(this,n)};let i=e.prototype.attributeChangedCallback;e.prototype.attributeChangedCallback=function(s,d,T){o.attributeChangedCallback(this,s,d,T,i)};let a=e.observedAttributes||[];Object.defineProperty(e,"observedAttributes",{configurable:!0,get(){return o.observedAttributes(this,a)},set(s){a=s}}),L(e),S(e)}observedAttributes(e,o){return o}connectedCallback(e,o){e.toggleAttribute("data-catalyst",!0),customElements.upgrade(e),$(e),l(e),h(e),o?.call(e),e.shadowRoot&&y(e.shadowRoot)}disconnectedCallback(e,o){o?.call(e)}attributeChangedCallback(e,o,r,n,i){l(e),o!=="data-catalyst"&&i&&i.call(e,o,r,n)}};function c(t,e){if(!Object.prototype.hasOwnProperty.call(t,p)){let r=t[p],n=t[p]=new Map;if(r)for(let[i,a]of r)n.set(i,new Set(a))}let o=t[p];return o.has(e)||o.set(e,new Set),o.get(e)}function F(t,e){c(t,"target").add(e),Object.defineProperty(t,e,{configurable:!0,get(){return E(this,e)}})}function O(t,e){c(t,"targets").add(e),Object.defineProperty(t,e,{configurable:!0,get(){return C(this,e)}})}function W(t){new m(t)}var f=new Map,B=new Promise(t=>{document.readyState!=="loading"?t():document.addEventListener("readystatechange",()=>t(),{once:!0})}),K=new Promise(t=>{let e=new AbortController;e.signal.addEventListener("abort",()=>t());let o={once:!0,passive:!0,signal:e.signal},r=()=>e.abort();document.addEventListener("mousedown",r,o),document.addEventListener("touchstart",r,o),document.addEventListener("keydown",r,o),document.addEventListener("pointerdown",r,o)}),Z=t=>new Promise(e=>{let o=new IntersectionObserver(r=>{for(let n of r)if(n.isIntersecting){e(),o.disconnect();return}},{rootMargin:"0px 0px 256px 0px",threshold:.01});for(let r of document.querySelectorAll(t))o.observe(r)}),R={ready:()=>B,firstInteraction:()=>K,visible:Z},z=new WeakMap;function q(t){cancelAnimationFrame(z.get(t)||0),z.set(t,requestAnimationFrame(()=>{for(let e of f.keys()){let o=t.matches(e)?t:t.querySelector(e);if(customElements.get(e)||o){let r=o?.getAttribute("data-load-on")||"ready",n=r in R?R[r]:R.ready;for(let i of f.get(e)||[])n(e).then(i);f.delete(e),z.delete(t)}}}))}var P;function G(t,e){f.has(t)||f.set(t,new Set),f.get(t).add(e),q(document.body),P||(P=new MutationObserver(o=>{if(f.size)for(let r of o)for(let n of r.addedNodes)n instanceof Element&&q(n)}),P.observe(document,{subtree:!0,childList:!0}))}export{I as attr,$ as autoShadowRoot,h as bind,W as controller,L as defineObservedAttributes,E as findTarget,C as findTargets,l as initializeAttrs,G as lazyDefine,w as listenForBind,S as register,F as target,O as targets};
//# sourceMappingURL=catalyst.mjs.map